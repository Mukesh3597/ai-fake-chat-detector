<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>AI Fake WhatsApp Chat Detector</title>
  <style>
    body { font-family: Arial; background: #f4f6f8; padding: 40px; }
    .box {
      max-width: 650px; margin: auto; background: white; padding: 22px;
      border-radius: 12px; box-shadow: 0 2px 12px rgba(0,0,0,.08);
    }
    textarea {
      width: 100%; height: 150px; padding: 10px; font-size: 14px;
      border-radius: 10px; border: 1px solid #ccc;
    }
    button {
      padding: 12px; width: 100%; margin-top: 12px; border: none;
      border-radius: 10px; font-size: 16px; cursor: pointer;
      background:#111; color:#fff;
    }
    .small { color:#444; font-size: 13px; margin-top: 8px; line-height: 1.4; }
    .result {
      margin-top: 18px; padding: 14px; border-radius: 12px;
      background: #f7f7f7; border: 1px solid #e7e7e7;
    }
    .tag {
      display:inline-block; padding: 6px 12px; border-radius: 999px;
      font-weight: bold; margin-right: 6px; font-size: 14px;
    }
    .scores {
      margin-top: 10px; padding: 10px; border-radius: 12px;
      background:#fff; border:1px dashed #d7d7d7; font-size:13px;
    }
    .bar { height: 10px; background:#e9edf3; border-radius:999px; overflow:hidden; }
    .fill { height:100%; }
    .row { margin-top:8px; }
    .lbl { display:flex; justify-content:space-between; font-size:12px; }
  </style>
</head>
<body>

<div class="box">
  <h2>ü§ñ AI Fake WhatsApp Chat Detector</h2>
  <p class="small">
    Paste chat/message ‚Üí Check ‚Üí AI will label it (Entertainment + Awareness).<br>
    ‚ö†Ô∏è 100% guarantee ‡§®‡§π‡•Ä‡§Ç ‚Äî ‡§≤‡•á‡§ï‡§ø‡§® scam / forward patterns ‡§ú‡§≤‡•ç‡§¶‡•Ä ‡§™‡§ï‡§°‡§º ‡§≤‡•á‡§§‡§æ ‡§π‡•à‡•§
  </p>

  <form method="POST">
    <textarea name="chat" placeholder="Paste WhatsApp chat here...">{{ chat }}</textarea>
    <button type="submit">‚úÖ Check Chat</button>
  </form>

  {% if result %}
  <div class="result">

    <!-- RESULT TAG -->
    <div>
      <strong>Result:</strong>
      {% if "REAL" in result %}
        <span class="tag" style="background:#e8fff0;">üòá REAL</span>
      {% elif "FAKE" in result %}
        <span class="tag" style="background:#ffe8e8;">ü§• FAKE</span>
      {% elif "MORE TEXT" in result %}
        <span class="tag" style="background:#eef2ff;">üìù MORE TEXT NEEDED</span>
      {% else %}
        <span class="tag" style="background:#fff6da;">‚ö†Ô∏è SUSPICIOUS</span>
      {% endif %}

      <!-- CONFIDENCE COLOR -->
      {% if confidence is not none %}
        {% if confidence >= 80 %}
          <span class="tag" style="background:#e8fff0;color:#0a7a2f;">üü¢ {{ confidence }}%</span>
        {% elif confidence >= 50 %}
          <span class="tag" style="background:#fff7da;color:#8a6d00;">üü° {{ confidence }}%</span>
        {% else %}
          <span class="tag" style="background:#ffece6;color:#a84300;">üü† {{ confidence }}%</span>
        {% endif %}
      {% endif %}
    </div>

    <!-- SENTENCE OUTPUT -->
    <div class="small" style="margin-top:10px;">
      <strong>This message is:</strong>
      {% if "REAL" in result %}
        <b>REAL</b>
      {% elif "FAKE" in result %}
        <b>FAKE</b>
      {% elif "SUSPICIOUS" in result %}
        <b>SUSPICIOUS</b>
      {% else %}
        <b>NEEDS MORE TEXT</b>
      {% endif %}
    </div>

    {% if explain %}
    <div class="small" style="margin-top:6px;">
      <strong>Explanation:</strong> {{ explain }}
    </div>
    {% endif %}

    <!-- ALL CONFIDENCE PERCENTAGES -->
    {% if prob_map and prob_map|length > 0 %}
    <div class="scores">
      <strong>Confidence (All Scores):</strong>
      <div class="row">REAL: <b>{{ prob_map.get("real",0) }}%</b></div>
      <div class="row">FAKE: <b>{{ prob_map.get("fake",0) }}%</b></div>
      <div class="row">SUSPICIOUS: <b>{{ prob_map.get("suspicious",0) }}%</b></div>

      <!-- Bars -->
      <div class="row">
        <div class="lbl"><span>REAL</span><span>{{ prob_map.get("real",0) }}%</span></div>
        <div class="bar"><div class="fill" style="width:{{ prob_map.get('real',0) }}%;background:#38b000;"></div></div>
      </div>
      <div class="row">
        <div class="lbl"><span>FAKE</span><span>{{ prob_map.get("fake",0) }}%</span></div>
        <div class="bar"><div class="fill" style="width:{{ prob_map.get('fake',0) }}%;background:#d00000;"></div></div>
      </div>
      <div class="row">
        <div class="lbl"><span>SUSPICIOUS</span><span>{{ prob_map.get("suspicious",0) }}%</span></div>
        <div class="bar"><div class="fill" style="width:{{ prob_map.get('suspicious',0) }}%;background:#f4b400;"></div></div>
      </div>
    </div>
    {% endif %}

    <div class="small" style="margin-top:10px;">
      Tip: Scam messages ‡§Æ‡•á‡§Ç ‡§Ö‡§ï‡•ç‡§∏‡§∞ ‡§∂‡§¨‡•ç‡§¶ ‡§π‡•ã‡§§‡•á ‡§π‡•à‡§Ç:
      <b>OTP, blocked, KYC, urgent, click, refund, win, fee</b>.
    </div>
  </div>
  {% endif %}
</div>

</body>
</html>

