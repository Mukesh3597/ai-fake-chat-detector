<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>AI Fake WhatsApp Chat Detector</title>
  <style>
    body { font-family: Arial; background: #f4f6f8; padding: 40px; }
    .box { max-width: 760px; margin:auto; background:#fff; padding:22px; border-radius:12px; box-shadow:0 2px 12px rgba(0,0,0,.08); }
    textarea { width:100%; height:130px; padding:10px; font-size:14px; border-radius:10px; border:1px solid #ccc; }
    button { padding:12px; width:100%; margin-top:12px; border:none; border-radius:10px; font-size:16px; cursor:pointer; background:#111; color:#fff; }
    .small { color:#444; font-size:13px; margin-top:8px; line-height:1.45; }
    .result { margin-top:18px; padding:14px; border-radius:12px; background:#f7f7f7; border:1px solid #e7e7e7; }
    .tag { display:inline-block; padding:6px 12px; border-radius:999px; font-weight:700; margin-right:8px; font-size:14px; }
    .scores { margin-top:10px; padding:10px; border-radius:12px; background:#fff; border:1px dashed #d7d7d7; font-size:13px; }
    .row { margin-top:8px; }
    .lbl { display:flex; justify-content:space-between; font-size:12px; }
    .bar { height:10px; background:#e9edf3; border-radius:999px; overflow:hidden; }
    .fill { height:100%; }
    .card { margin-top:14px; padding:12px; border-radius:12px; background:#fff; border:1px solid #e7e7e7; }
    .trend { margin-top:16px; padding:12px; border-radius:12px; background:#fff; border:1px solid #e7e7e7; }
    .trend-item { padding:8px; border-radius:10px; background:#f7f7f7; margin-top:8px; }
    .sharebtn { background:#0b5; }
  </style>
</head>
<body>

<div class="box">
  <h2>ü§ñ Fake / Real Message Checker</h2>
  <p class="small">
    Paste message ‚Üí Check ‚Üí Result + Confidence + Explanation.  
    ‚ö†Ô∏è Awareness tool (100% guarantee ‡§®‡§π‡•Ä‡§Ç)‡•§
  </p>

  <!-- Trending -->
  <div class="trend">
    <b>üî• ‡§Ü‡§ú Trending Messages</b>
    <div class="small">‡§≤‡•ã‡§ó ‡§Ü‡§ú ‡§∏‡§¨‡§∏‡•á ‡§ú‡•ç‡§Ø‡§æ‡§¶‡§æ ‡§Ø‡§π‡•Ä messages check ‡§ï‡§∞ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç:</div>
    {% for t in trending %}
      <div class="trend-item">
        <div class="small"><b>({{ t.count }})</b> {{ t.sample }}</div>
      </div>
    {% endfor %}
  </div>

  <form method="POST">
    <textarea name="chat" placeholder="Paste WhatsApp message here...">{{ chat }}</textarea>
    <button type="submit">‚úÖ Check Message</button>
  </form>

  {% if result %}
  <div class="result">
    <div>
      <strong>Result:</strong>

      {% if "REAL" in result %}
        <span class="tag" style="background:#e8fff0;">üòá REAL</span>
      {% elif "FAKE" in result %}
        <span class="tag" style="background:#ffe8e8;">ü§• FAKE</span>
      {% elif "MORE TEXT" in result %}
        <span class="tag" style="background:#eef2ff;">üìù MORE TEXT NEEDED</span>
      {% else %}
        <span class="tag" style="background:#fff6da;">‚ö†Ô∏è SUSPICIOUS</span>
      {% endif %}

      {% if confidence is not none %}
        {% if confidence >= 80 %}
          <span class="tag" style="background:#e8fff0;color:#0a7a2f;">üü¢ {{ confidence }}%</span>
        {% elif confidence >= 50 %}
          <span class="tag" style="background:#fff7da;color:#8a6d00;">üü° {{ confidence }}%</span>
        {% else %}
          <span class="tag" style="background:#ffece6;color:#a84300;">üü† {{ confidence }}%</span>
        {% endif %}
      {% endif %}
    </div>

    <div class="small" style="margin-top:10px;">
      <b>This message is:</b>
      {% if "REAL" in result %}<b>REAL</b>{% elif "FAKE" in result %}<b>FAKE</b>{% else %}<b>SUSPICIOUS</b>{% endif %}
    </div>

    {% if explain %}
      <div class="small" style="margin-top:6px;"><b>Explanation:</b> {{ explain }}</div>
    {% endif %}

    <!-- Highlighted message -->
    {% if highlighted_html %}
      <div class="card">
        <b>Highlighted Message</b>
        <div class="small" style="margin-top:8px;">{{ highlighted_html | safe }}</div>
      </div>
    {% endif %}

    <!-- Links -->
    {% if urls and urls|length > 0 %}
      <div class="card">
        <b>Detected Source/Links</b>
        <div class="small" style="margin-top:8px;">
          {% for u in urls %}
            ‚Ä¢ {{ u }}<br>
          {% endfor %}
        </div>
      </div>
    {% endif %}

    <!-- All scores -->
    {% if prob_map and prob_map|length > 0 %}
    <div class="scores">
      <b>Confidence (All Scores)</b>

      <div class="row">
        <div class="lbl"><span>REAL</span><span>{{ prob_map.get("real",0) }}%</span></div>
        <div class="bar"><div class="fill" style="width:{{ prob_map.get('real',0) }}%;background:#38b000;"></div></div>
      </div>

      <div class="row">
        <div class="lbl"><span>FAKE</span><span>{{ prob_map.get("fake",0) }}%</span></div>
        <div class="bar"><div class="fill" style="width:{{ prob_map.get('fake',0) }}%;background:#d00000;"></div></div>
      </div>

      <div class="row">
        <div class="lbl"><span>SUSPICIOUS</span><span>{{ prob_map.get("suspicious",0) }}%</span></div>
        <div class="bar"><div class="fill" style="width:{{ prob_map.get('suspicious',0) }}%;background:#f4b400;"></div></div>
      </div>

      <!-- Share Card -->
      <form method="POST" action="/card" target="_blank" style="margin-top:12px;">
        <input type="hidden" name="result" value="{{ result }}">
        <input type="hidden" name="confidence" value="{{ confidence }}">
        <input type="hidden" name="real_p" value="{{ prob_map.get('real',0) }}">
        <input type="hidden" name="fake_p" value="{{ prob_map.get('fake',0) }}">
        <input type="hidden" name="sus_p" value="{{ prob_map.get('suspicious',0) }}">
        <button class="sharebtn" type="submit">üì∏ Shareable Result Card</button>
      </form>
    </div>
    {% endif %}
  </div>
  {% endif %}
</div>

</body>
</html>
